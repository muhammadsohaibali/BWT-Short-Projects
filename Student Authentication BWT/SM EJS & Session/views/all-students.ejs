<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
    <link rel="shortcut icon" href="/imgs/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="/css/all-students.css" />

    <link rel="stylesheet" href="/css/components/sidebar.css" />
    <link rel="stylesheet" href="/css/components/topbar.css" />

    <title>All Students - BaitusSalam TeckPark</title>
</head>

<body>
    <div class="main-container-div">
        <aside class="sidebar-sidebar">
            <div class="sidebar-logo">
                <img class="img-default" src="/imgs/btp-logo.png" alt="Tech Park Logo">
                <img class="img-min" src="/imgs/baitussalam-logo-min.svg" alt="Tech Park Logo">
                <div class="sidebar-div-logout" id="logout-btn-1">
                    <i class='bxr bx-arrow-in-left-square-half'></i>
                    <span>Logout</span>
                </div>
            </div>
            <ul class="sidebar-menu">
                <a href="/">
                    <li id="goto-dashboard">
                        <i class='bx bx-chalkboard'></i>
                        <span>Dashboard</span>
                    </li>
                </a>
                <a href="/profile">
                    <li id="my-profile">
                        <i class='bx bx-user'></i>
                        <span>Profile</span>
                    </li>
                </a>
                <a href="/all-students">
                    <li id="all-students" class="sidebar-active">
                        <i class='bx bxs-group'></i>
                        <span>All Students</span>
                    </li>
                </a>
                <li>
                    <i class='bx bx-book-alt'></i>
                    <span>Courses</span>
                </li>
                <li>
                    <i class='bx bx-check-square'></i>
                    <span>Attendance</span>
                </li>
                <li>
                    <i class='bx bx-edit'></i>
                    <span>Exam</span>
                </li>
            </ul>
            <div class="sidebar-div-logout" id="logout-btn-2">
                <i class='bxr bx-arrow-in-left-square-half'></i>
                <span>Logout</span>
            </div>
        </aside>

        <main class="main-main">
            <header class="main-header">
                <div class="main-search">
                    <i class='bx bx-search'></i>
                    <input type="text" placeholder="Search" id="querry-inp">
                </div>
                <div class="user-info-container">
                    <img src="/imgs/sample-user.jpg" alt="User" class="user-avatar" />
                    <div class="user-info">
                        <span class="user-username">
                            <%= data.userData?.fullname %>
                        </span>
                        <span class="user-role">Admin</span>
                    </div>
                </div>
            </header>

            <section class="main-content">
                <div class="header">
                    <h2>All Students</h2>
                    <button class="add-btn">
                        <i class='bx bx-plus'></i> Add Student
                    </button>
                </div>

                <table class="student-table">
                    <thead>
                        <tr>
                            <th><input type="checkbox" /></th>
                            <th>Name</th>
                            <th>Roll No</th>
                            <th>Address</th>
                            <th>Date of Birth</th>
                            <th>Phone No</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% data.allStudents.map(std=> { %>
                            <tr>
                                <td><input type="checkbox" /></td>
                                <td><%= std.fullname %></td>
                                <td><%= std.rollNo %></td>
                                <td><%= std.address %></td>
                                <td><%= std.dob %></td>
                                <td><%= std.phone %></td>
                                <td class="action-buttons">
                                    <button class="btn update-btn">
                                        <i class='bx bx-edit'></i> Update
                                    </button>
                                    <button class="btn delete-btn">
                                        <i class='bx bx-trash'></i> Delete
                                    </button>
                                </td>
                            </tr>
                            <% }) %>
                    </tbody>
                </table>
            </section>
        </main>
    </div>
    <form id="logout-form" action="/api/auth/logout" method="POST" style="display: none;"></form>
    <script>
        const logoutBtns = ['logout-btn-1', 'logout-btn-2'].map(btn => document.getElementById(btn))
        logoutBtns.forEach(btn => {
            btn.addEventListener('click', () => document.getElementById('logout-form').submit())
        })
    </script>
</body>

</html>